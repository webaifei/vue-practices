(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{188:function(t,s,n){"use strict";n.r(s);var e=n(1),a=Object(e.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("目前我们使用的埋点方式是命令式埋点，它的特点：")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),n("p",[t._v("之前的埋点方案同样使用的是命令式埋点方案，只不过将埋点配置放到了单独的配置文件中，方便集中化的管理。")]),t._v(" "),n("p",[t._v("但是因为几个原因导致实际效果不太理想：")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),n("p",[t._v("回头重新梳理埋点的逻辑，其实针对每一个埋点能够唯一标记并且有固定的规律即可。")]),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),n("p",[t._v("模块曝光埋点使用"),n("a",{attrs:{href:"https://webaifei.github.io/vue-intersection-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-intersection-plugin"),n("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"埋点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#埋点","aria-hidden":"true"}},[this._v("#")]),this._v(" 埋点")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("埋点是数据采集的手段， 从开发者角度来讲分为前端埋点和后端埋点；各有优劣。前端埋点的实现方式划分的话，目前存在：手动埋点，自动埋点。其中手动埋点又包含：命令式埋点和声明式埋点和可视化埋点。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("p",[this._v("TODO: 各个埋点技术实现原理和对比")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("灵活，可以实现各种业务埋点需求")]),this._v(" "),s("li",[this._v("需要前端研发同学coding 完成埋点，增加开发量")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"之前的埋点方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#之前的埋点方案","aria-hidden":"true"}},[this._v("#")]),this._v(" 之前的埋点方案")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("同样需要在编码卖点的代码中去设置特定的个性化参数")]),this._v(" "),s("li",[this._v("对于不同页面中的相同组件，需要在配置中不同的页面下添加相同的埋点配置")]),this._v(" "),s("li",[this._v("实际迭代过程中 修改已有埋点的频率并不是非常高，集中式维护埋点配置的优势得不到提现，及时需要修改埋点配置，因为上面的原因 导致我们还是需要到具体的发送埋点的逻辑代码中进行修改。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"重构之后的埋点方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重构之后的埋点方式","aria-hidden":"true"}},[this._v("#")]),this._v(" 重构之后的埋点方式")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("ol",[s("li",[this._v("不再需要在配置文件中维护埋点配置，")]),this._v(" "),s("li",[this._v("兼容配置埋点方式， 对于老的页面 新增埋点同样不需要在配置文件中添加维护")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentPage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" current_event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// options中核心的两个字段")]),t._v("\noptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("events "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    current_event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" current_event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    current_page"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" currentPage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    event_value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" eventValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" eventMsg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    event_remark"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" eventRemark\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\noptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("retention"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rsd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("retention"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rsd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    rsd\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们核心关注的就是上面的三个参数： 标记是哪个页面"),s("code",[this._v("currentPage")]),this._v(" 什么事件"),s("code",[this._v("current_event")]),this._v(" 其他说明字段"),s("code",[this._v("options")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ol",[n("li",[n("code",[t._v("currentPage")]),t._v(" 通过代码获取当前"),n("code",[t._v("url")]),t._v("的"),n("code",[t._v("pathname")]),t._v(" 自动转换成指定的格式（已下划线_链接的字符串）")]),t._v(" "),n("li",[n("code",[t._v("current_event")]),t._v(" 在调用埋点的时候作为参数传入")]),t._v(" "),n("li",[n("code",[t._v("options")]),t._v("中的字段也同样通过代码进行获取配置")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("具体实现查看"),s("code",[this._v("utils/log.js")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),s("p",[this._v("因为涉及到业务具体逻辑 目前没有进行抽象成一个npm包；后面考虑做到脚手架中。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"模块曝光埋点解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块曝光埋点解决方案","aria-hidden":"true"}},[this._v("#")]),this._v(" 模块曝光埋点解决方案")])}],!1,null,null,null);a.options.__file="log.md";s.default=a.exports}}]);