(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{195:function(t,e,n){"use strict";n.r(e);var a=n(1),i=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"过场动画"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#过场动画","aria-hidden":"true"}},[t._v("#")]),t._v(" 过场动画")]),t._v(" "),n("h3",{attrs:{id:"设置过渡效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置过渡效果","aria-hidden":"true"}},[t._v("#")]),t._v(" 设置过渡效果")]),t._v(" "),n("p",[t._v("我们可以用transition组件给它添加一些过渡效果")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('使用动态的 transition name\n<transition :name="transitionName">\n    <keep-alive max="2">\n        <router-view></router-view>\n    </keep-alive>\n</transition>\n')])])]),n("h3",{attrs:{id:"监控路由跳转-动态设置过渡效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#监控路由跳转-动态设置过渡效果","aria-hidden":"true"}},[t._v("#")]),t._v(" 监控路由跳转,动态设置过渡效果")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('"$route" (to, from) {\n    // 前进\n    this.transitionName = "slide-right";\n    // 后退\n    this.transitionName = "slide-left";    \n}\n')])])]),n("h4",{attrs:{id:"_1-如何判断前进还是后退"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-如何判断前进还是后退","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.如何判断前进还是后退")]),t._v(" "),n("p",[t._v("基于当前路由与目标路由的变化关系来决定使用哪种过渡 我们采用方案为 跳转时为页面添加时间戳参数")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('需要在每个页面点击跳转时添加ctime参数\nthis.$router.push({\n    path:\'/\',\n    query:{\n        etime:Date.now()\n    }\n})\n\n判断切换页面时间戳参数之间的大小关系,如果要跳转页面的时间戳大于当前页面的时间戳做前进动画slide-right,\n否则则做后退动画slide-left\n"$route" (to, from) {\n    if(to.query.ctime && from.query.ctime && to.query.ctime < from.query.ctime) {\n        this.transitionName = "slide-left";\n    } else if(!to.query.ctime && from.query.ctime) {\n        this.transitionName = "slide-left";\n    } else {\n        this.transitionName = "slide-right";\n    }\n}\n')])])]),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("我们需要在每次跳转时添加当前时间戳参数 为了方便开发、避免代码冗余,我们对vueRouter push方法进行重写,实现跳转则添加etime参数 值为当前时间的时间戳")])]),t._v(" "),n("p",[t._v("重写vueRouter push方法 实现点击则添加etime参数 值为当前时间的时间戳")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('vueRouter.prototype._push = vueRouter.prototype.push;\nvueRouter.prototype.push = function push (location, onComplete, onAbort) {\n    let locationObj = {\n        query: {}\n    };\n    if(typeof location === "string") {\n        locationObj.path = location;\n    } else if(isObject(location)) {\n        locationObj = {...locationObj,...location};\n    }\n    locationObj.query.ctime = Date.now();\n    this._push(locationObj, onComplete, onAbort);\n};\n')])])]),n("h4",{attrs:{id:"_2-每次切换时向左向右切换动画如何实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-每次切换时向左向右切换动画如何实现","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.每次切换时向左向右切换动画如何实现")]),t._v(" "),n("p",[t._v("slide-right:当前页面向屏幕左边移动消失的同时,下一个页面从屏幕的右边向左边移动出现")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(".slide-right-enter-active {\n    animation-name: slide-enter;\n    animation-duration: .3s;\n    animation-timing-function: ease;\n    z-index: 2;\n}\n\n.slide-right-leave-active {\n    animation-name: slide-leave;\n    animation-duration: .3s;\n    animation-timing-function: ease;\n    z-index: 0;\n}\n")])])]),n("p",[t._v("slide-left:当前页面向屏幕右边移动消失的同时,下一个页面从屏幕的左边向右边移动出现")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v(".slide-left-enter-active {\n    animation-name: slide-back-enter;\n    animation-duration: .3s;\n    animation-timing-function: ease;\n    z-index: 0;\n}\n\n.slide-left-leave-active {\n    animation-name: slide-back-leave;\n    animation-duration: .3s;\n    animation-timing-function: ease-out;\n    z-index: 2;\n}\n")])])])])}],!1,null,null,null);i.options.__file="router.md";e.default=i.exports}}]);